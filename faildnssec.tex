\chapter{Â¿'Qu\'e problemas presenta DNSSEC?}
\section{Adaptaciones necesarias}
Para la correcta implementaci\'on y puesta en marcha de DNSSEC de manera masiva existen algunos conflictos que act\'uan a modo de traba.\\
Por un lado, es necesario introducir algunos cambios operacionales tanto para los clientes como para los servidores. Seg\'un la lista de comprobaci\'on presentada por Ekl\"{o}v y Lagerholm en un art\'iculo del IP Journal de Cisco\cite{imp2011}, podemos destacar:
\begin{itemize}
 \item Reconfiguraci\'on de los firewall: las \textit{queries} DNS primero intentan utilizar UDP, y posteriormente TCP si no reciben ninguna respuesta para el paquete UDP inicial \textit{o bien} la respuesta es trunca; dado que el tama\~no de los paquetes DNSSEC es mayor, la probabilidad de que algo bloquee parte de la respuesta utilizando DNSSEC es mucho m\'as grande. Para que el sistema funcione correctamente, resulta obligatorio abrir los firewall tanto para TCP como para UDP en el puerto 53. Por otro lado, como DNSSEC utiliza el standard EDNS0\footnote{Uno de los mecanismos de extensi\'on de DNS que permite, entre otras cosas, que un cliente indique que puede recibir respuestas DNS utilizando UDP con una longitud mayor a 512 bytes}, es necesario que el firewall est\'e configurado para interpretar dicho standard correctamente. De otra manera, los firewall tienden a bloquear los paquetes DNSSEC y no permiten la comunicaci\'on. Existe un estudio realizado por ICANN sobre el soporte de EDNS0 en los firewall m\'as com\'unes\cite{icann07}.
 \item Muchos TLD requieren que el registrante (ej: \textit{redes.org}) no se comunique directamente con el registro (\textit{.org}), sino que una tercer entidad (en ingl\'es llamada \textit{registrar}) es la encargada de manejar toda la comunicaci\'on relacionada a DNS y DNSSEC. Esto implica que es necesario comprobar que el \textit{registrar} en cuesti\'on tenga efectivamente soporte para DNSSEC para el TLD en cuesti\'on.
 \item Es muy usual que grandes organizaciones que requieren alta disponibilidad para sus servidores utilicen balanceadores de carga que respondan seg\'un el estado de los servicios. Sin embargo, actualmente son pocos los balanceadores que soportan DNSSEC.
\end{itemize}

Sin embargo, los \'items mostrados pueden ser solucionados comprendiendo las implicaciones de la implementaci\'on del sistema y a partir de una cuidadosa planificaci\'on. Los problemas m\'as graves aparecen a partir de las fallas de seguridad que DNSSEC no soluciona, y en algunos casos, \textbf{llega a empeorar gravemente}. Estudiaremos a continuaci\'on los considerados m\'as remarcables: (ver las transparencias del Gur\'u!!!)

\section{Ataques DDoS}
\'Este es probablemente el fallo m\'as preocupante del protocolo: no s\'olo DNSSEC no mejora la protecci\'on frente a este tipo de ataques, sino que el aumento en la cantidad de paquetes enviados a la red y el mayor costo de procesamiento por paquete resultan en que el protocolo ayude a amplificar preocupantemente la vulnerabilidad frente a DDoS. En WOOT '09\footnote{3rd USENIX Workshop on Offensive Technologies}, D. J. Bernstein realiz\'o la presentanci\'on "`Breaking DNSSEC"'\cite{break09}, documentando c\'omo el env\'io de 77.118 bytes desde un \'unico sitio resultaba en que 941 servidores DNSSEC enviaran 2.526.996 bytes; dicha acci\'on, repetida 5 veces por segundo desde 200 sitios, hizo que los 3Mbps de cada sitio de ataque lograran denegar el servicio de \texttt{twitter.com} con 20.000 Mbps de datos.

\section{Falta de confidencialidad}
DNSSEC fue dise\~nado originalmente asumiendo que todas las \textit{query} DNS iban a obtener la misma respuesta sin importar qui\'en hubiera realizado la consulta; es decir, DNSSEC asume que todos los datos de un servidor DNS son visibles. Esto implica que el protocolo no fue dise\~nado ni siquiera para considerar la confidencialidad de datos y el control de acceso a \'estos.\\
En la misma conferencia, Bernstein mostr\'o c\'omo, a pesar de que en el dominio \texttt{clegg.com} se encontraban deshabilitadas las \textit{zone transfers} en DNS, se pod\'ia acceder a toda la lista de subdominios utilizando DNSSEC.

\section{Fallos en el protocolo}
Por \'ultimo, y como es natural en la mayor\'ia de los sistemas de seguridad, dado que DNSSEC es un protocolo complejo y que presenta algunas complicaciones a la hora de ser implementado, algunos bugs permitieron eventualmente evitar la necesidad de autenticar las firmas de los paquetes; es decir, todo el dise\~no de seguridad realizado result\'o in\'util gracias a bugs menores en las implementaciones de DNSSEC.\\
Algunas otras t\'ecnicas, como el duplicado de firmas o el criptoan\'alisis tambi\'en pueden permitir que un atacante tenga acceso a las claves y destruya la seguridad del sistema. Peor a\'un, dado que como se dijo anteriormente, como DNSSEC no cubre los \textit{glue records}, existe la posibilidad de que un atacante env\'ie paquetes que incluyan exactamantes las mismas firmas que un paquete aut\'entico, pero cambie por ejemplo los registros \texttt{NS} y \texttt{A} para que apunten a un servidor del atacante, y de acuerdo al dise\~no actual del protocolo, el paquete ser\'a autentificado.